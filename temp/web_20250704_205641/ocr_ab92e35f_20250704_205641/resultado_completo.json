{
  "execution_id": "ab92e35f",
  "timestamp": "20250704_205641",
  "input_image": "uploads/20250704_205641_Imagen_de_WhatsApp_2025-06-16_a_las_11.46.42_34d9fbac.jpg",
  "temp_directory": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641",
  "parametros": {
    "language": "spa",
    "profile": "rapido",
    "save_intermediate": true
  },
  "etapas": {
    "1_validacion": {
      "tiempo": 0.132,
      "diagnostico": {
        "imagen_info": {
          "ancho": 720,
          "alto": 1280,
          "resolucion_total": 921600,
          "canales": 3,
          "modo": "RGB",
          "formato": "JPEG",
          "brillo_promedio": 171.92734917534722,
          "desviacion_brillo": 14.534011411158696,
          "rango_dinamico": 182.0,
          "histogram": [
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            1.0,
            0.0,
            3.0,
            2.0,
            2.0,
            2.0,
            3.0,
            4.0,
            7.0,
            5.0,
            7.0,
            8.0,
            20.0,
            16.0,
            20.0,
            21.0,
            29.0,
            29.0,
            28.0,
            44.0,
            40.0,
            40.0,
            47.0,
            57.0,
            70.0,
            45.0,
            70.0,
            84.0,
            77.0,
            82.0,
            101.0,
            103.0,
            114.0,
            112.0,
            111.0,
            130.0,
            150.0,
            137.0,
            168.0,
            151.0,
            148.0,
            199.0,
            217.0,
            222.0,
            222.0,
            260.0,
            241.0,
            272.0,
            281.0,
            272.0,
            290.0,
            296.0,
            318.0,
            313.0,
            329.0,
            372.0,
            387.0,
            381.0,
            391.0,
            417.0,
            408.0,
            397.0,
            454.0,
            458.0,
            403.0,
            487.0,
            444.0,
            504.0,
            494.0,
            449.0,
            504.0,
            503.0,
            482.0,
            557.0,
            523.0,
            564.0,
            578.0,
            527.0,
            544.0,
            543.0,
            643.0,
            621.0,
            618.0,
            638.0,
            632.0,
            607.0,
            612.0,
            622.0,
            628.0,
            656.0,
            673.0,
            720.0,
            925.0,
            965.0,
            1069.0,
            1303.0,
            1344.0,
            1527.0,
            1505.0,
            1451.0,
            1483.0,
            1449.0,
            1350.0,
            1593.0,
            1540.0,
            1677.0,
            1717.0,
            1765.0,
            1924.0,
            2028.0,
            2207.0,
            2359.0,
            2637.0,
            3267.0,
            3936.0,
            5268.0,
            6863.0,
            8919.0,
            10173.0,
            11917.0,
            14245.0,
            18397.0,
            22222.0,
            27037.0,
            30031.0,
            35617.0,
            43664.0,
            46380.0,
            48224.0,
            47963.0,
            38979.0,
            36756.0,
            39087.0,
            32886.0,
            29539.0,
            33373.0,
            23481.0,
            21340.0,
            22889.0,
            19654.0,
            18583.0,
            25693.0,
            19883.0,
            20440.0,
            22131.0,
            20487.0,
            19324.0,
            16949.0,
            7815.0,
            3985.0,
            2156.0,
            1031.0,
            454.0,
            290.0,
            188.0,
            146.0,
            80.0,
            47.0,
            27.0,
            31.0,
            20.0,
            18.0,
            15.0,
            19.0,
            15.0,
            13.0,
            14.0,
            12.0,
            8.0,
            11.0,
            5.0,
            8.0,
            10.0,
            24.0,
            16.0,
            23.0,
            29.0,
            52.0,
            38.0,
            57.0,
            40.0,
            19.0,
            8.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0,
            0.0
          ],
          "histogram_analysis": {
            "picos_principales": [
              [
                171,
                48224
              ],
              [
                175,
                39087
              ],
              [
                178,
                33373
              ]
            ],
            "rango_fondo_sugerido": 175,
            "rango_texto_sugerido": 171,
            "distribucion": {
              "oscuras": 0.002698567695915699,
              "medias": 0.37405380606651306,
              "claras": 0.6232476234436035
            },
            "requiere_inversion": false,
            "bimodal": false
          },
          "variaciones_fondo": {
            "total_regiones_analizadas": 1350,
            "fondos_unicos_detectados": 36,
            "variacion_fondos": 7.932757491982961,
            "fondos_heterogeneos": false,
            "rango_fondos": [
              145,
              193
            ],
            "requiere_unificacion_avanzada": false,
            "regiones_variacion": [
              {
                "posicion": [
                  0,
                  0
                ],
                "media_local": 187.8452,
                "std_local": 2.866572336432486,
                "pico_fondo": 189
              },
              {
                "posicion": [
                  25,
                  0
                ],
                "media_local": 187.9016,
                "std_local": 2.7773219906953535,
                "pico_fondo": 189
              },
              {
                "posicion": [
                  50,
                  0
                ],
                "media_local": 187.3116,
                "std_local": 3.7894729765496415,
                "pico_fondo": 188
              },
              {
                "posicion": [
                  75,
                  0
                ],
                "media_local": 186.8884,
                "std_local": 4.05728301206608,
                "pico_fondo": 188
              },
              {
                "posicion": [
                  100,
                  0
                ],
                "media_local": 187.306,
                "std_local": 3.4914128945170604,
                "pico_fondo": 189
              },
              {
                "posicion": [
                  125,
                  0
                ],
                "media_local": 187.6012,
                "std_local": 2.728325229880045,
                "pico_fondo": 189
              },
              {
                "posicion": [
                  150,
                  0
                ],
                "media_local": 187.5456,
                "std_local": 2.7146861034012755,
                "pico_fondo": 189
              },
              {
                "posicion": [
                  175,
                  0
                ],
                "media_local": 188.2624,
                "std_local": 2.766504335799964,
                "pico_fondo": 190
              },
              {
                "posicion": [
                  200,
                  0
                ],
                "media_local": 188.6376,
                "std_local": 2.7768806672235664,
                "pico_fondo": 190
              },
              {
                "posicion": [
                  225,
                  0
                ],
                "media_local": 187.8924,
                "std_local": 3.6071071844346405,
                "pico_fondo": 190
              }
            ]
          }
        },
        "calidad_imagen": {
          "contraste": 14.534011411158696,
          "blur_variance": 152.05569661062262,
          "entropy": 5.422525405883789,
          "gradiente_promedio": 19.655950523248805,
          "brillo_promedio": 171.92734917534722,
          "uniformidad_brillo": 14.534011411158696,
          "calificacion_calidad": 40
        },
        "deteccion_texto": {
          "regiones_detectadas": 49,
          "area_total_texto": 177017,
          "densidad_texto": 0.19207573784722223,
          "regiones": [
            {
              "x": 618,
              "y": 1269,
              "width": 21,
              "height": 11,
              "area": 231,
              "aspect_ratio": 1.9090909090909092
            },
            {
              "x": 652,
              "y": 1268,
              "width": 20,
              "height": 12,
              "area": 240,
              "aspect_ratio": 1.6666666666666667
            },
            {
              "x": 420,
              "y": 1260,
              "width": 12,
              "height": 14,
              "area": 168,
              "aspect_ratio": 0.8571428571428571
            },
            {
              "x": 49,
              "y": 1256,
              "width": 11,
              "height": 12,
              "area": 132,
              "aspect_ratio": 0.9166666666666666
            },
            {
              "x": 556,
              "y": 1254,
              "width": 59,
              "height": 26,
              "area": 1534,
              "aspect_ratio": 2.269230769230769
            },
            {
              "x": 332,
              "y": 1254,
              "width": 11,
              "height": 12,
              "area": 132,
              "aspect_ratio": 0.9166666666666666
            },
            {
              "x": 296,
              "y": 1254,
              "width": 24,
              "height": 20,
              "area": 480,
              "aspect_ratio": 1.2
            },
            {
              "x": 500,
              "y": 1253,
              "width": 16,
              "height": 24,
              "area": 384,
              "aspect_ratio": 0.6666666666666666
            },
            {
              "x": 463,
              "y": 1248,
              "width": 12,
              "height": 10,
              "area": 120,
              "aspect_ratio": 1.2
            },
            {
              "x": 131,
              "y": 1239,
              "width": 12,
              "height": 17,
              "area": 204,
              "aspect_ratio": 0.7058823529411765
            },
            {
              "x": 23,
              "y": 1226,
              "width": 19,
              "height": 26,
              "area": 494,
              "aspect_ratio": 0.7307692307692307
            },
            {
              "x": 3,
              "y": 1160,
              "width": 12,
              "height": 10,
              "area": 120,
              "aspect_ratio": 1.2
            },
            {
              "x": 603,
              "y": 1158,
              "width": 14,
              "height": 10,
              "area": 140,
              "aspect_ratio": 1.4
            },
            {
              "x": 546,
              "y": 1074,
              "width": 20,
              "height": 13,
              "area": 260,
              "aspect_ratio": 1.5384615384615385
            },
            {
              "x": 270,
              "y": 1041,
              "width": 12,
              "height": 31,
              "area": 372,
              "aspect_ratio": 0.3870967741935484
            },
            {
              "x": 287,
              "y": 1040,
              "width": 22,
              "height": 29,
              "area": 638,
              "aspect_ratio": 0.7586206896551724
            },
            {
              "x": 312,
              "y": 1028,
              "width": 55,
              "height": 40,
              "area": 2200,
              "aspect_ratio": 1.375
            },
            {
              "x": 249,
              "y": 984,
              "width": 53,
              "height": 24,
              "area": 1272,
              "aspect_ratio": 2.2083333333333335
            },
            {
              "x": 80,
              "y": 969,
              "width": 33,
              "height": 20,
              "area": 660,
              "aspect_ratio": 1.65
            },
            {
              "x": 614,
              "y": 960,
              "width": 29,
              "height": 53,
              "area": 1537,
              "aspect_ratio": 0.5471698113207547
            }
          ],
          "cobertura_texto_porcentaje": 19.207573784722225
        },
        "ruido_artefactos": {
          "nivel_ruido": 1.4376432291666668,
          "desviacion_ruido": 3.768471935725867,
          "porcentaje_pixeles_ruidosos": 4.325846354166667,
          "uniformidad": 1.854482421875,
          "calificacion_ruido": "Bajo"
        },
        "geometria_orientacion": {
          "sesgo_estimado": -7.5,
          "lineas_detectadas": 50,
          "simetria_horizontal": 0.3225109875202179,
          "relacion_aspecto": 0.5625,
          "requiere_deskew": true,
          "orientacion_correcta": false
        },
        "deteccion_inteligente": {
          "tipo_imagen": "screenshot_movil",
          "esquema_color": "texto_oscuro_fondo_claro",
          "inversion_requerida": false,
          "ui_elements_detectados": true,
          "aspect_ratio": 0.5625,
          "calidad_digital": false,
          "dark_percentage": 2.2724609375,
          "light_percentage": 97.7275390625,
          "edge_density": 0.029340277777777778,
          "noise_estimate": 95.19729650125524,
          "confianza_deteccion": 0.6000000000000001
        },
        "recomendaciones": {
          "perfil_recomendado": "rapido",
          "aplicar_deskew": true,
          "nivel_denoise": "moderado",
          "ajuste_contraste": true,
          "filtro_bilateral": true,
          "prioridades": [
            "Corrección de sesgo necesaria",
            "Mejorar contraste"
          ]
        },
        "puntuacion_general": {
          "total": 69.8,
          "calidad": 40,
          "texto": 96.0,
          "ruido": 100,
          "geometria": 50,
          "categoria": "Buena"
        }
      },
      "imagen_original": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641/00_imagen_original.png",
      "archivo_diagnostico": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641/diagnostico.json"
    },
    "2_mejora": {
      "perfil_usado": "rapido",
      "pasos_aplicados": [
        "00_analisis_sin_unificacion",
        "00_maxima_claridad_letras",
        "01_no_inversion_necesaria",
        "03_sin_procesamiento"
      ],
      "metricas_antes": {
        "brillo_promedio": 171.92734917534722,
        "contraste": 14.534011411158696,
        "nitidez": 152.05569661062262,
        "rango_dinamico": 182.0
      },
      "parametros_aplicados": {
        "analisis_fondos": {
          "intensidad_media_original": 171.93,
          "porcentaje_fondo_oscuro": 0.0020000000949949026,
          "unificacion_aplicada": false,
          "razon_no_unificacion": "preservacion_calidad_usuario"
        },
        "no_inversion": {
          "razon": "imagen_suficientemente_clara",
          "intensidad_media": 171.93
        },
        "screenshot_processing_eliminado": {
          "razon": "eliminado_por_solicitud_usuario",
          "upscaling": false,
          "unsharp_masking": false,
          "contrast_adjustment": false,
          "binarization": false,
          "brightness_adjustment": false,
          "impacto": "preserva_imagen_original_completamente"
        }
      },
      "tiempo_procesamiento": 0.067,
      "estrategia_aplicada": "Screenshot Móvil - SIN PROCESAMIENTO",
      "metricas_despues": {
        "brillo_promedio": 171.9091265190972,
        "contraste": 16.266566356473817,
        "nitidez": 437.05863715125196,
        "rango_dinamico": 246.0
      },
      "imagen_mejorada": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641/imagen_mejorada.png",
      "mejora_calidad": {
        "contraste": {
          "antes": 14.53,
          "despues": 16.27,
          "cambio": 1.73,
          "porcentaje": 11.9
        },
        "nitidez": {
          "antes": 152.06,
          "despues": 437.06,
          "cambio": 285.0,
          "porcentaje": 187.4
        },
        "rango_dinamico": {
          "antes": 182.0,
          "despues": 246.0,
          "cambio": 64.0,
          "porcentaje": 35.2
        }
      },
      "tiempo": 0.078,
      "archivo_resultado": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641/resultado_mejora.json"
    },
    "3_ocr": {
      "texto_completo": "12162092 1 - foarguez Dra . 21.065 2,401 LOGIA Y",
      "total_caracteres": 48,
      "tiempo_procesamiento": 2.052,
      "metodo_extraccion": "ONNXTR_SINGLE_PASS",
      "configuracion_onnxtr": "high_confidence",
      "total_palabras_detectadas": 9,
      "palabras_detectadas": [
        {
          "texto": "12162092",
          "confianza": 0.9733036160469055,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 2,
            "palabra": 0
          }
        },
        {
          "texto": "1",
          "confianza": 0.998353123664856,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 4,
            "palabra": 0
          }
        },
        {
          "texto": "-",
          "confianza": 0.9527420401573181,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 8,
            "palabra": 1
          }
        },
        {
          "texto": "foarguez",
          "confianza": 0.7449082732200623,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 11,
            "palabra": 0
          }
        },
        {
          "texto": "Dra.",
          "confianza": 0.8908464908599854,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 12,
            "palabra": 0
          }
        },
        {
          "texto": "21.065",
          "confianza": 0.8574612140655518,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 13,
            "palabra": 4
          }
        },
        {
          "texto": "2,401",
          "confianza": 0.9220397472381592,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 13,
            "palabra": 5
          }
        },
        {
          "texto": "LOGIA",
          "confianza": 0.7042624950408936,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 15,
            "palabra": 0
          }
        },
        {
          "texto": "Y",
          "confianza": 0.8810770511627197,
          "posicion": {
            "pagina": 0,
            "bloque": 0,
            "linea": 15,
            "palabra": 1
          }
        }
      ],
      "confianza_promedio": 0.881,
      "estadisticas_onnxtr": {
        "paginas_procesadas": 1,
        "palabras_alta_confianza": 7,
        "palabras_media_confianza": 2,
        "palabras_baja_confianza": 0,
        "min_confianza_aplicada": 0.7
      },
      "calidad_extraccion": {
        "score_calidad": 73.6,
        "categoria": "buena",
        "confianza_promedio": 0.881,
        "palabras_alta_confianza": 7,
        "total_palabras": 9,
        "longitud_texto": 48,
        "recomendaciones": [
          "Calidad de extracción satisfactoria"
        ]
      },
      "deteccion_inteligente": {
        "tipo_imagen": "screenshot_movil",
        "esquema_color": "texto_oscuro_fondo_claro",
        "inversion_requerida": false,
        "ui_elements_detectados": true,
        "aspect_ratio": 0.5625,
        "calidad_digital": false,
        "dark_percentage": 2.2724609375,
        "light_percentage": 97.7275390625,
        "edge_density": 0.029340277777777778,
        "noise_estimate": 95.19729650125524,
        "confianza_deteccion": 0.6000000000000001
      },
      "datos_financieros": {
        "amount": [
          {
            "valor": "121",
            "posicion_texto": 0
          },
          {
            "valor": "620",
            "posicion_texto": 3
          },
          {
            "valor": "92",
            "posicion_texto": 6
          },
          {
            "valor": "1",
            "posicion_texto": 0
          },
          {
            "valor": "21.065",
            "posicion_texto": 28
          }
        ],
        "analisis_documento": {
          "tipo": "desconocido",
          "confianza": 0,
          "keywords_encontradas": []
        },
        "resumen_extraido": {
          "montos_encontrados": 5,
          "fechas_encontradas": 0,
          "referencias_encontradas": 0,
          "cuentas_encontradas": 0,
          "telefonos_encontrados": 0,
          "total_elementos": 5,
          "completitud_porcentaje": 50
        }
      },
      "tiempo": 2.061,
      "archivo_resultado": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641/resultado_ocr.json",
      "archivo_texto": "temp/web_20250704_205641/ocr_ab92e35f_20250704_205641/texto_extraido.txt"
    }
  },
  "archivos_generados": [],
  "resumen_final": {
    "imagen_original": {
      "dimensiones": "720x1280",
      "calidad_inicial": "Buena",
      "puntuacion_calidad": 69.8
    },
    "procesamiento_aplicado": {
      "perfil_usado": "rapido",
      "pasos_ejecutados": 4,
      "lista_pasos": [
        "00_analisis_sin_unificacion",
        "00_maxima_claridad_letras",
        "01_no_inversion_necesaria",
        "03_sin_procesamiento"
      ],
      "tiempo_procesamiento": 0.067
    },
    "resultados_ocr": {
      "caracteres_extraidos": 48,
      "palabras_detectadas": 9,
      "confianza_promedio": 0.881,
      "confianza_ponderada": 0.881,
      "calidad_extraccion": "buena"
    },
    "datos_financieros": {
      "tipo_documento": "desconocido",
      "elementos_encontrados": 5,
      "completitud": 50,
      "montos_encontrados": 5,
      "fechas_encontradas": 0
    },
    "rendimiento": {
      "tiempo_total": 0,
      "tiempo_validacion": 0.132,
      "tiempo_mejora": 0.078,
      "tiempo_ocr": 2.061
    },
    "calificacion_final": {
      "puntuacion": 68.1,
      "categoria": "Buena",
      "componentes": {
        "calidad_imagen": 69.8,
        "confianza_ocr": 73.6,
        "completitud_datos": 50.0
      }
    },
    "recomendaciones": [
      "Error generando recomendaciones"
    ]
  },
  "tiempo_total": 2.277
}